<!doctype html>
<html>
<head>
    <title>FlowPaper Javascript Package</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="IE=Edge" http-equiv="X-UA-Compatible"></meta>
    <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width" />
    <style type="text/css" media="screen">
        html, body	{ height:100%; }
        body { margin:0; padding:0; overflow:auto;}
        .infoBox > * {font-family:Lato;}
        #flashContent { display:none; }
    </style>

    <link href='http://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="css/flowpaper.css" />
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/jquery.extensions.min.js"></script>
    <!--[if gte IE 10 | !IE ]><!-->
    <script type="text/javascript" src="js/three.min.js"></script>
    <!--<![endif]-->
    <script type="text/javascript" src="js/flowpaper.js"></script>
    <script type="text/javascript" src="js/flowpaper_handlers.js"></script>
    <script src="https://kit.fontawesome.com/43d19060f3.js" crossorigin="anonymous"></script>
</head>
<body>
<div id="documentViewer" class="flowpaper_viewer" style="position:absolute;left:10px;top:10px;width:900px;height:620px"></div>
<a id="descargar-pdf" href="#" target="_blank" download
   style="position:absolute; left: 675px; top:25px; background-color: rgb(146, 109, 109); color:white; padding:10px 12px; border-radius:6px; text-decoration:none; font-family: sans-serif; z-index:9999; font-size: 18px;">
  <i class="fa-solid fa-download"></i>
</a>
<button id="cerrar-flowpaper" title="Cerrar visor"
  style="position:absolute; left: 730px; top:25px; background-color: rgb(146, 109, 109); color:white; border:none; padding:10px 14px; border-radius:6px; font-size:16px; cursor:pointer; z-index:9999;">
  <i class="fa-solid fa-xmark"></i>
</button>
<script type="text/javascript">
  const pdfFile = decodeURIComponent(window.location.search.replace("?PDF=", ""));

  $('#documentViewer').FlowPaperViewer({
    config : {
      PDFFile: pdfFile,
      EnableWebGL : true,
      UIConfig    : 'UI_Zine.xml'
    }
  });

  // Asignar al botÃ³n de descarga
  document.getElementById("descargar-pdf").href = pdfFile;

  document.getElementById("cerrar-flowpaper").addEventListener("click", () => {
    if (window.parent) {
      const visor = window.parent.document.getElementById("visor-flowpaper");
      const contenedor = window.parent.document.getElementById("flipbook-container");
      if (visor && contenedor) {
        visor.classList.add("oculto");
        contenedor.innerHTML = "";
      }
    }
    });
</script>

<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>

<script type="text/javascript">
    var url = window.location.href.toString();

    if(location.length==0){
        url = document.URL.toString();
    }

    if(url.indexOf("file:")>=0){
        jQuery('#documentViewer').html("<div style='position:relative;background-color:#ffffff;width:420px;font-family:Verdana;font-size:10pt;left:22%;top:20%;padding: 10px 10px 10px 10px;border-style:solid;border-width:5px;'><img src=''>&nbsp;<b>You are trying to use FlowPaper from a local directory.</b><br/><br/> FlowPaper needs to be copied to a web server before the viewer can display its document properly.<br/><br/>Please copy the FlowPaper files to a web server and access the viewer through a http:// url.</div>");
    }
</script>
</body>
</html>